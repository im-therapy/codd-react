# ОБЪЯСНЕНИЕ ПРОЕКТА ЦОДД СМОЛЕНСКОЙ ОБЛАСТИ

## ОБЩАЯ СТРУКТУРА ПРОЕКТА

Создан React-приложение для системы мониторинга дорожной обстановки в Смоленской области. Проект использует Create React App и включает в себя навигацию между страницами, интерактивную карту и темный дизайн.

---

## ФАЙЛЫ И ИХ НАЗНАЧЕНИЕ

### 1. `/src/App.js` - Главный компонент приложения
```javascript
import './styles/global.css';
import { Routes, Route } from "react-router-dom";
import routes from "./routes/routes";
import Layout from './components/Layout/Layout';
```

**Что делает:**
- Импортирует глобальные стили
- Настраивает роутинг для навигации между страницами
- Оборачивает все страницы в Layout (шапка + контент)

**Переменные:**
- `routes` - массив всех маршрутов приложения

---

### 2. `/src/routes/routes.js` - Конфигурация маршрутов
```javascript
import Maps from "../pages/Maps";
import General from "../pages/General";
import Articles from "../pages/Articles";
import Auth from "../pages/Auth";
import NotFound from "../pages/404";

const routes = [
    { path: "/", element: <General /> },
    { path: "/articles", element: <Articles /> },
    { path: "/maps", element: <Maps /> },
    { path: "/auth", element: <Auth /> },
    { path: "*", element: <NotFound /> },
];
```

**Что делает:**
- Определяет какая страница показывается по какому URL
- `"/"` - главная страница
- `"/articles"` - страница статей
- `"/maps"` - страница с картой
- `"/auth"` - страница авторизации
- `"*"` - страница 404 для несуществующих URL

---

### 3. `/src/components/Layout/Layout.js` - Общий макет страниц
```javascript
import Header from "./Header";

export default function Layout({ children, ...props }) {
    return (
        <div className="root-layout" style={{ height: '100vh', overflow: 'hidden' }}>
            <Header />
            <main {...props} style={{ height: '100%' }}>{ children }</main>
        </div>
    )
}
```

**Что делает:**
- Создает общую структуру для всех страниц
- Показывает Header на каждой странице
- В `main` вставляется контент конкретной страницы через `children`

**Переменные:**
- `children` - содержимое страницы, которое передается внутрь Layout

---

### 4. `/src/components/Layout/Header.js` - Шапка сайта с навигацией
```javascript
import { Link, useLocation } from 'react-router-dom';
import { ReactComponent as HomeIcon } from '../../assets/icons/home.svg';
import { ReactComponent as NewsIcon } from '../../assets/icons/news.svg';
import { ReactComponent as MapIcon } from '../../assets/icons/map.svg';
import { ReactComponent as AuthIcon } from '../../assets/icons/auth.svg';

export default function Header() {
    const location = useLocation();
```

**Что делает:**
- Показывает логотип "ЦОДД Смоленской области" (ЦОДД зеленого цвета #62A744)
- Создает навигационное меню с 3 страницами: Главная, Статьи, Карты
- Показывает кнопку "Авторизация" справа
- Подсвечивает активную страницу белым цветом, остальные серым (#676C75)

**Переменные:**
- `location` - текущий URL страницы для определения активной ссылки

**Стили Header:**
- Фиксированная позиция сверху с отступами 16px
- Высота 70px
- Темный фон #0C0C0C с размытием blur(8px)
- Граница #1C1D1F толщиной 2px
- Скругленные углы 12px

---

### 5. `/src/pages/Maps.js` - Страница с интерактивной картой

#### Импорты и константы:
```javascript
import { useState, useEffect } from 'react';
import { Map } from 'react-map-gl/maplibre';
import { ReactComponent as FalseIcon } from '../assets/icons/false.svg';
import { ReactComponent as SettingsIcon } from '../assets/icons/setts.svg';
import 'maplibre-gl/dist/maplibre-gl.css';

const SMOLENSK_CENTER = { lng: 32.045, lat: 54.782 };
const REGION_BOUNDS = [30.8, 53.2, 35.5, 55.8];
```

**Константы:**
- `SMOLENSK_CENTER` - координаты центра Смоленска (долгота, широта)
- `REGION_BOUNDS` - границы Смоленской области [запад, юг, восток, север]

#### Стили кнопок:
```javascript
const buttonStyle = {
    position: 'fixed',
    bottom: 16,
    zIndex: 1000,
    backgroundColor: '#0C0C0C',
    backdropFilter: 'blur(8px)',
    border: '2px solid #1C1D1F',
    borderRadius: 16,
    height: 54,
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    gap: 6,
    cursor: 'pointer'
};
```

**Что делает:** Общий стиль для кнопок внизу экрана с темным фоном и размытием

#### Состояние компонента:
```javascript
const [viewState, setViewState] = useState({
    longitude: SMOLENSK_CENTER.lng,
    latitude: SMOLENSK_CENTER.lat,
    zoom: 16
});
const [accidentsCount] = useState(12);
```

**Переменные состояния:**
- `viewState` - текущее положение и зум карты
- `accidentsCount` - количество аварий (пока статичное число 12)

#### Геолокация:
```javascript
useEffect(() => {
    if (!navigator.geolocation) return;
    
    navigator.geolocation.getCurrentPosition(
        (pos) => {
            const { latitude: lat, longitude: lng } = pos.coords;
            if (lat >= 53.2 && lat <= 55.8 && lng >= 30.8 && lng <= 35.5) {
                setViewState(prev => ({ ...prev, latitude: lat, longitude: lng }));
            }
        },
        () => {}
    );
}, []);
```

**Что делает:**
- При загрузке страницы пытается получить местоположение пользователя
- Если пользователь находится в пределах Смоленской области - центрирует карту на нем
- Если геолокация недоступна или пользователь вне области - остается на Смоленске

#### Стиль карты:
```javascript
const mapStyle = {
    version: 8,
    sources: {
        osm: {
            type: 'raster',
            tiles: ['https://a.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png'],
            tileSize: 256
        }
    },
    layers: [{ id: 'osm', type: 'raster', source: 'osm' }]
};
```

**Что делает:** Настраивает темную карту от CartoDB вместо стандартной светлой

#### Компонент карты:
```javascript
<Map
    {...viewState}
    onMove={evt => setViewState(evt.viewState)}
    style={{ width: '100%', height: '100%' }}
    mapStyle={mapStyle}
    maxBounds={REGION_BOUNDS}
    attributionControl={false}
/>
```

**Параметры:**
- `{...viewState}` - передает текущие координаты и зум
- `onMove` - обновляет состояние при движении карты
- `maxBounds` - ограничивает карту границами Смоленской области
- `attributionControl={false}` - убирает надпись "MapLibre" снизу

#### Кнопки:
1. **Кнопка аварий** (слева):
   - Размер 138x54px
   - Показывает количество аварий красным цветом (#C21F1F)
   - Иконка false.svg

2. **Кнопка настроек** (справа от кнопки аварий):
   - Размер 145x54px
   - Серый цвет текста и иконки (#676C75)
   - Иконка setts.svg

---

### 6. `/src/pages/General.js` - Главная страница
```javascript
export default function General() {
    return (
        <div style={{
            height: '100vh',
            backgroundColor: '#0C0C0C',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center'
        }}>
            <h1 style={{
                color: 'white',
                fontSize: '48px',
                fontWeight: 'bold'
            }}>
                ГЛАВНАЯ
            </h1>
        </div>
    )
}
```

**Что делает:** Показывает страницу с надписью "ГЛАВНАЯ" по центру на темном фоне

---

### 7. `/src/pages/Articles.js` - Страница статей
```javascript
export default function Articles() {
    return (
        <div style={{
            height: '100vh',
            backgroundColor: '#0C0C0C',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center'
        }}>
            <h1 style={{
                color: 'white',
                fontSize: '48px',
                fontWeight: 'bold'
            }}>
                СТАТЬИ
            </h1>
        </div>
    )
}
```

**Что делает:** Показывает страницу с надписью "СТАТЬИ" по центру на темном фоне

---

### 8. `/src/pages/Auth.js` - Страница авторизации
```javascript
export default function Auth() {
    return (
        <div style={{
            height: '100vh',
            backgroundColor: '#0C0C0C',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center'
        }}>
            <h1 style={{
                color: 'white',
                fontSize: '48px',
                fontWeight: 'bold'
            }}>
                РЕГИСТРАЦИЯ
            </h1>
        </div>
    )
}
```

**Что делает:** Показывает страницу с надписью "РЕГИСТРАЦИЯ" по центру на темном фоне

---

### 9. `/src/pages/404.js` - Страница ошибки
```javascript
export default function NotFound() {
    return (
        <div style={{
            height: '100vh',
            backgroundColor: '#0C0C0C',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center'
        }}>
            <h1 style={{
                color: 'white',
                fontSize: '48px',
                fontWeight: 'bold'
            }}>
                404 - НЕ НАЙДЕНО
            </h1>
        </div>
    )
}
```

**Что делает:** Показывает страницу ошибки для несуществующих URL

---

### 10. `/src/index.css` - Глобальные стили
```css
@import url('https://fonts.googleapis.com/css2?family=AG+Link:wght@200..800&display=swap');

* {
    border: 0;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    text-box: trim-both cap alphabetic;
    font-family: 'AG Link', sans-serif;
    font-display: swap;
}

body {
    background-color: #0C0C0C;
}

svg {
    background: transparent !important;
}
```

**Что делает:**
- Подключает шрифт AG Link для всего текста
- Убирает стандартные отступы и границы у всех элементов
- Устанавливает темный фон #0C0C0C для всего сайта
- Делает SVG иконки прозрачными

---

## ИКОНКИ В `/src/assets/icons/`

Все SVG иконки исправлены для правильной работы с цветами:
- `home.svg` - иконка дома для главной страницы
- `news.svg` - иконка новостей для страницы статей  
- `map.svg` - иконка карты для страницы карт
- `auth.svg` - иконка входа для авторизации
- `false.svg` - иконка для кнопки аварий
- `setts.svg` - иконка настроек

**Исправления в иконках:**
- Заменил `stroke="white"` на `stroke="currentColor"`
- Заменил `fill="white"` на `fill="transparent"` в clipPath
- Теперь иконки меняют цвет в зависимости от состояния (активная/неактивная страница)

---

## ЦВЕТОВАЯ СХЕМА

- **Основной фон:** #0C0C0C (очень темный серый)
- **ЦОДД в логотипе:** #62A744 (зеленый)
- **Активная страница:** white (белый)
- **Неактивные элементы:** #676C75 (серый)
- **Аварии:** #C21F1F (красный)
- **Границы:** #1C1D1F (темно-серый)

---

## ТЕХНОЛОГИИ

1. **React** - основной фреймворк
2. **React Router** - навигация между страницами
3. **MapLibre GL JS** - интерактивная карта (заменил Leaflet для лучшей производительности)
4. **CartoDB Dark** - темная тема карты
5. **AG Link** - шрифт для всего текста

---

## ОСОБЕННОСТИ РЕАЛИЗАЦИИ

### Карта:
- Автоматическое определение местоположения пользователя
- Ограничение области просмотра Смоленской областью
- Темная тема без белых квадратов при масштабировании
- Зум 16 для детального просмотра улиц
- Убрана attribution (надпись MapLibre)

### Навигация:
- Подсветка активной страницы
- Иконки слева от названий страниц
- Прозрачный Header с размытием

### Дизайн:
- Темная тема во всем приложении
- Единообразные страницы с центрированными заголовками
- Кнопки с размытием и темными границами

Проект готов к дальнейшему развитию - добавлению реальных данных об авариях, системы авторизации и контента для страниц.